<!DOCTYPE html>
<ui:composition template="WEB-INF/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">Featured</ui:define>

	<ui:define name="content">

		<f:metadata>
			<f:viewParam name="categories" value="#{featuredPresentationsController.categories}" />
			<f:viewAction action="#{featuredPresentationsController.init}" />
		</f:metadata>

		<ui:param name="_controller" value="#{featuredPresentationsController}" />

		<h:form id="featuredPresentationsForm">
			<p:selectOneMenu value="#{_controller.categories}">
				<f:selectItem itemLabel="All" itemValue="" />
				<f:selectItems value="#{staticsController.presentationCategories}" var="cateogry" itemValue="#{category}"
					itemLabel="#{category.label}" />
			</p:selectOneMenu>
			<p:dataScroller value="#{_controller.presentations}" var="presentation" lazy="true" chunkSize="10">
				<h:panelGrid columns="2" columnClasses="column-20,column-80 top" styleClass="eprez-border" style="margin: 10px; padding: 10px;">
					<p:outputPanel layout="block">
						<p:graphicImage url="/image?id=#{presentation.id}&placeholder=1" styleClass="eprez-featured-image" />
					</p:outputPanel>
					<p:outputPanel layout="block" style="margin-left: 10px;">
						<h:panelGrid columns="1" cellpadding="5">
							<h:outputLink value="view-presentation.xhtml">
								<h:outputText value="#{presentation.name}" styleClass="big" />
								<f:param name="id" value="#{presentation.id}" />
							</h:outputLink>
							<h:outputText value="#{presentation.description == null ? '' : presentation.description.substring(0, 500)}..." styleClass="small" />
						</h:panelGrid>
					</p:outputPanel>
				</h:panelGrid>
			</p:dataScroller>
		</h:form>

	</ui:define>

</ui:composition>
